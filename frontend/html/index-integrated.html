<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lynn's Database</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="preload" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" as="style"
        onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css">
    </noscript>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
        as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
        <link rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    </noscript>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üéØ</text></svg>">
    
    <!-- Enhanced Styles from lynn-website.html -->
    <style>
        /* Enhanced Login System Styles */
        .password-recovery-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .modal-header h3 {
            color: #333;
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            padding: 5px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: #f0f0f0;
            color: #333;
        }

        .recovery-options {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .recovery-option {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }

        .recovery-option:hover,
        .recovery-option.active {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .recovery-form {
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .recovery-submit {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .recovery-submit:hover {
            transform: translateY(-2px);
        }

        .help-links {
            margin-top: 20px;
            text-align: center;
        }

        .help-link {
            color: #667eea;
            text-decoration: none;
            margin: 0 10px;
            font-size: 14px;
            transition: color 0.3s ease;
        }

        .help-link:hover {
            color: #764ba2;
            text-decoration: underline;
        }

        /* Loading States */
        .loading {
            position: relative;
            color: transparent;
        }

        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid #fff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Enhanced Dashboard Styles */
        .dashboard-container {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .dashboard-header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            text-align: center;
        }

        .dashboard-nav {
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-btn {
            padding: 12px 24px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-btn:hover,
        .nav-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .dashboard-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            min-height: 400px;
        }

        /* Analytics Dashboard */
        .analytics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f8f9ff, #e8ecff);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #e0e6ff;
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Search Enhancement */
        .search-container {
            background: #f8f9ff;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
        }

        .search-box {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .search-input {
            flex: 1;
            padding: 12px 20px;
            border: 2px solid #e0e6ff;
            border-radius: 8px;
            font-size: 16px;
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .search-btn {
            padding: 12px 24px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .search-btn:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .search-filters {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .filter-option {
            padding: 8px 16px;
            background: white;
            border: 2px solid #e0e6ff;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .filter-option:hover,
        .filter-option.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        /* User Management */
        .user-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .user-card {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .user-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .user-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 18px;
        }

        .user-info h3 {
            margin: 0;
            color: #333;
        }

        .user-role {
            color: #666;
            font-size: 14px;
        }

        .user-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .action-btn.edit {
            background: #28a745;
            color: white;
        }

        .action-btn.delete {
            background: #dc3545;
            color: white;
        }

        .action-btn:hover {
            transform: translateY(-2px);
        }

        /* Settings Panel */
        .settings-section {
            margin-bottom: 30px;
        }

        .settings-section h3 {
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #f0f0f0;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-info h4 {
            margin: 0 0 5px 0;
            color: #333;
        }

        .setting-info p {
            margin: 0;
            color: #666;
            font-size: 14px;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: #ddd;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .toggle-switch.active {
            background: #667eea;
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            top: 3px;
            left: 3px;
            width: 24px;
            height: 24px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .toggle-switch.active::after {
            left: 33px;
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            animation: slideInRight 0.3s ease;
        }

        .notification.success {
            background: #28a745;
        }

        .notification.error {
            background: #dc3545;
        }

        .notification.info {
            background: #17a2b8;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
            }
            to {
                transform: translateX(0);
            }
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .dashboard-container {
                padding: 10px;
            }

            .nav-buttons {
                justify-content: stretch;
            }

            .nav-btn {
                flex: 1;
                justify-content: center;
            }

            .analytics-grid {
                grid-template-columns: 1fr;
            }

            .search-box {
                flex-direction: column;
            }

            .search-filters {
                justify-content: center;
            }

            .user-grid {
                grid-template-columns: 1fr;
            }

            .recovery-options {
                flex-direction: column;
            }
        }

        /* Create Account Modal */
        .create-account-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .create-account-form {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        .password-requirements {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 12px;
        }

        .requirement {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 5px;
        }

        .requirement.valid {
            color: #28a745;
        }

        .requirement.invalid {
            color: #dc3545;
        }
    </style>
</head>

<body>
    <!-- Skip to content link for accessibility -->
    <a href="#main-content" class="skip-to-content">Skip to main content</a>

    <!-- Auto-save indicator -->
    <div class="auto-save-indicator">Auto-saved</div>

    <!-- HTML File Navigation Dropdown -->
    <div class="html-file-dropdown" id="htmlFileDropdown">
        <div class="dropdown-header" onclick="toggleDropdown()">
            <i class="fas fa-file-code"></i>
            HTML Files
            <i class="fas fa-chevron-down" style="margin-left: auto; font-size: 12px;"></i>
        </div>
        <div class="dropdown-content">
            <a href="index.html" class="dropdown-item">
                <i class="fas fa-home"></i>
                index.html (Main)
            </a>
            <a href="index-integrated.html" class="dropdown-item current">
                <i class="fas fa-rocket"></i>
                index-integrated.html (Enhanced)
            </a>
            <a href="lynn-website.html" class="dropdown-item">
                <i class="fas fa-star"></i>
                lynn-website.html (Standalone)
            </a>
        </div>
    </div>

    <div class="container" role="main">
        <header>
            <div class="brand-header">
                <h1><i class="fas fa-database"></i> Welcome!</h1>
                <div class="website-url">üåê lynnsdatabase.local</div>
            </div>
            <p>Checkout personalized details about friends, family, and more!</p>
        </header>

        <!-- Login Section -->
        <section class="login-section" id="loginSection">
            <div class="login-container">
                <h2><i class="fas fa-user-lock"></i> Sign In</h2>
                <form class="login-form" id="loginForm">
                    <div class="input-group">
                        <label for="username" class="sr-only">Username:</label>
                        <i class="fas fa-user" aria-hidden="true"></i>
                        <input type="text" id="username" placeholder="Username:" required
                            autocomplete="username" aria-describedby="username-error">
                        <div id="username-error" class="error-message" role="alert" aria-live="polite"></div>
                    </div>
                    <div class="input-group">
                        <label for="password" class="sr-only">Password:</label>
                        <i class="fas fa-lock" aria-hidden="true"></i>
                        <input type="password" id="password" placeholder="Password:" required
                            autocomplete="current-password" aria-describedby="password-error">
                        <button type="button" class="toggle-password" id="togglePassword" 
                                aria-label="Toggle password visibility" tabindex="-1">
                            <i class="fas fa-eye" aria-hidden="true"></i>
                        </button>
                        <div id="password-error" class="error-message" role="alert" aria-live="polite"></div>
                    </div>
                    <button type="submit" class="login-btn" id="loginBtn">
                        <span class="btn-text">Sign In</span>
                        <i class="fas fa-sign-in-alt btn-icon" aria-hidden="true"></i>
                    </button>
                </form>
                
                <!-- Help Links -->
                <div class="help-links">
                    <a href="#" class="help-link" id="forgotPasswordLink">Forgot Password?</a>
                    <a href="#" class="help-link" id="forgotUsernameLink">Forgot Username?</a>
                    <a href="#" class="help-link" id="createAccountLink">Create Account</a>
                </div>

                <!-- Demo Accounts Section -->
                <div class="demo-accounts">
                    <h3>Demo Accounts:</h3>
                    <div class="demo-list">
                        <div class="demo-item">
                            <strong>testuser</strong> (Password: 123)
                        </div>
                        <div class="demo-item">
                            <strong>lynn</strong> (Password: lynn123)
                        </div>
                        <div class="demo-item">
                            <strong>admin</strong> (Password: admin123)
                        </div>
                    </div>
                </div>

                <div class="login-error" id="loginError" role="alert" aria-live="polite"></div>
            </div>
        </section>

        <!-- Enhanced Dashboard Section -->
        <section class="dashboard-container" id="dashboardContainer">
            <div class="dashboard-header">
                <h1>Welcome to Lynn's Database Dashboard</h1>
                <p>Manage your database with advanced tools and analytics</p>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>

            <nav class="dashboard-nav">
                <div class="nav-buttons">
                    <button class="nav-btn active" data-section="analytics">
                        <i class="fas fa-chart-bar"></i> Analytics
                    </button>
                    <button class="nav-btn" data-section="search">
                        <i class="fas fa-search"></i> Advanced Search
                    </button>
                    <button class="nav-btn" data-section="users">
                        <i class="fas fa-users"></i> User Management
                    </button>
                    <button class="nav-btn" data-section="profiles">
                        <i class="fas fa-address-card"></i> Profile Browser
                    </button>
                    <button class="nav-btn" data-section="settings">
                        <i class="fas fa-cog"></i> Settings
                    </button>
                </div>
            </nav>

            <main class="dashboard-content" id="dashboardContent">
                <!-- Analytics Section -->
                <div class="content-section" id="analytics-section">
                    <h2>Database Analytics</h2>
                    <div class="analytics-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalUsers">12</div>
                            <div class="stat-label">Total Users</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="activeProfiles">8</div>
                            <div class="stat-label">Active Profiles</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalSearches">247</div>
                            <div class="stat-label">Total Searches</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="systemUptime">99.8%</div>
                            <div class="stat-label">System Uptime</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <h3>Recent Activity</h3>
                        <div class="activity-feed" id="activityFeed">
                            <div class="activity-item">
                                <i class="fas fa-user-plus"></i>
                                <span>New user 'testuser' registered</span>
                                <small>2 hours ago</small>
                            </div>
                            <div class="activity-item">
                                <i class="fas fa-search"></i>
                                <span>Advanced search performed</span>
                                <small>4 hours ago</small>
                            </div>
                            <div class="activity-item">
                                <i class="fas fa-edit"></i>
                                <span>Profile updated for lynn</span>
                                <small>6 hours ago</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Advanced Search Section -->
                <div class="content-section" id="search-section" style="display: none;">
                    <h2>Advanced Search</h2>
                    <div class="search-container">
                        <div class="search-box">
                            <input type="text" class="search-input" id="searchInput" placeholder="Search users, profiles, or content...">
                            <button class="search-btn" id="searchBtn">
                                <i class="fas fa-search"></i> Search
                            </button>
                        </div>
                        <div class="search-filters">
                            <div class="filter-option active" data-filter="all">All</div>
                            <div class="filter-option" data-filter="users">Users</div>
                            <div class="filter-option" data-filter="profiles">Profiles</div>
                            <div class="filter-option" data-filter="content">Content</div>
                            <div class="filter-option" data-filter="recent">Recent</div>
                        </div>
                    </div>
                    <div class="search-results" id="searchResults">
                        <p>Enter a search term to find users, profiles, or content in the database.</p>
                    </div>
                </div>

                <!-- User Management Section -->
                <div class="content-section" id="users-section" style="display: none;">
                    <h2>User Management</h2>
                    <div class="section-controls">
                        <button class="add-user-btn" id="addUserBtn">
                            <i class="fas fa-user-plus"></i> Add New User
                        </button>
                        <div class="user-filters">
                            <select id="userRoleFilter">
                                <option value="">All Roles</option>
                                <option value="admin">Admin</option>
                                <option value="user">User</option>
                                <option value="guest">Guest</option>
                            </select>
                            <select id="userStatusFilter">
                                <option value="">All Status</option>
                                <option value="active">Active</option>
                                <option value="inactive">Inactive</option>
                            </select>
                        </div>
                    </div>
                    <div class="user-grid" id="userGrid">
                        <!-- Users will be loaded here -->
                    </div>
                </div>

                <!-- Profile Browser Section -->
                <div class="content-section" id="profiles-section" style="display: none;">
                    <h2>Profile Browser</h2>
                    <div id="profileBrowser">
                        <!-- Original profile browsing functionality will be preserved here -->
                        <div class="profiles-container">
                            <p>Browse and manage user profiles in the database.</p>
                            <div class="profile-actions">
                                <button class="profile-btn" id="viewAllProfiles">
                                    <i class="fas fa-eye"></i> View All Profiles
                                </button>
                                <button class="profile-btn" id="addNewProfile">
                                    <i class="fas fa-plus"></i> Add New Profile
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div class="content-section" id="settings-section" style="display: none;">
                    <h2>System Settings</h2>
                    
                    <div class="settings-section">
                        <h3>Database Configuration</h3>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Auto-save Changes</h4>
                                <p>Automatically save changes to the database</p>
                            </div>
                            <div class="toggle-switch active" data-setting="autosave"></div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Enable Notifications</h4>
                                <p>Show system notifications for important events</p>
                            </div>
                            <div class="toggle-switch active" data-setting="notifications"></div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Dark Mode</h4>
                                <p>Switch to dark theme for better viewing</p>
                            </div>
                            <div class="toggle-switch" data-setting="darkmode"></div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>Security Settings</h3>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Two-Factor Authentication</h4>
                                <p>Add an extra layer of security to your account</p>
                            </div>
                            <div class="toggle-switch" data-setting="2fa"></div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-info">
                                <h4>Session Timeout</h4>
                                <p>Automatically log out after period of inactivity</p>
                            </div>
                            <select class="setting-select" data-setting="session-timeout">
                                <option value="15">15 minutes</option>
                                <option value="30" selected>30 minutes</option>
                                <option value="60">1 hour</option>
                                <option value="120">2 hours</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>Data Management</h3>
                        <div class="setting-actions">
                            <button class="settings-btn export-btn">
                                <i class="fas fa-download"></i> Export Database
                            </button>
                            <button class="settings-btn import-btn">
                                <i class="fas fa-upload"></i> Import Data
                            </button>
                            <button class="settings-btn backup-btn">
                                <i class="fas fa-save"></i> Create Backup
                            </button>
                        </div>
                    </div>
                </div>
            </main>
        </section>

        <!-- Original Content Sections (preserved from your existing index.html) -->
        <section class="search-section" id="searchSection" style="display: none;">
            <div class="search-container">
                <h2><i class="fas fa-search"></i> Search Database</h2>
                <!-- Your existing search functionality will be preserved here -->
            </div>
        </section>

        <!-- All other existing sections from your index.html will be preserved here -->
    </div>

    <!-- Password Recovery Modal -->
    <div class="password-recovery-modal" id="passwordRecoveryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Account Recovery</h3>
                <button class="close-btn" id="closeRecoveryModal">&times;</button>
            </div>
            
            <div class="recovery-options">
                <div class="recovery-option active" data-method="email">
                    <i class="fas fa-envelope"></i>
                    <h4>Email Recovery</h4>
                    <p>Reset via email</p>
                </div>
                <div class="recovery-option" data-method="phone">
                    <i class="fas fa-phone"></i>
                    <h4>Phone Recovery</h4>
                    <p>Reset via SMS</p>
                </div>
            </div>

            <form class="recovery-form" id="recoveryForm">
                <div class="form-group">
                    <label for="recoveryEmail">Email Address</label>
                    <input type="email" id="recoveryEmail" required>
                </div>
                <div class="form-group" id="phoneGroup" style="display: none;">
                    <label for="recoveryPhone">Phone Number</label>
                    <input type="tel" id="recoveryPhone">
                </div>
                <button type="submit" class="recovery-submit" id="recoverySubmit">
                    Send Recovery Instructions
                </button>
            </form>

            <div class="recovery-help">
                <p>Still having trouble? <a href="#" class="help-link">Contact Support</a></p>
            </div>
        </div>
    </div>

    <!-- Create Account Modal -->
    <div class="create-account-modal" id="createAccountModal">
        <div class="create-account-form">
            <div class="modal-header">
                <h3>Create New Account</h3>
                <button class="close-btn" id="closeCreateAccountModal">&times;</button>
            </div>
            
            <form id="createAccountForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="newFirstName">First Name</label>
                        <input type="text" id="newFirstName" required>
                    </div>
                    <div class="form-group">
                        <label for="newLastName">Last Name</label>
                        <input type="text" id="newLastName" required>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="newUsername">Username</label>
                    <input type="text" id="newUsername" required>
                </div>
                
                <div class="form-group">
                    <label for="newEmail">Email Address</label>
                    <input type="email" id="newEmail" required>
                </div>
                
                <div class="form-group">
                    <label for="newPassword">Password</label>
                    <input type="password" id="newPassword" required>
                    <div class="password-requirements">
                        <div class="requirement" id="lengthReq">
                            <i class="fas fa-times"></i> At least 8 characters
                        </div>
                        <div class="requirement" id="upperReq">
                            <i class="fas fa-times"></i> One uppercase letter
                        </div>
                        <div class="requirement" id="lowerReq">
                            <i class="fas fa-times"></i> One lowercase letter
                        </div>
                        <div class="requirement" id="numberReq">
                            <i class="fas fa-times"></i> One number
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" required>
                </div>
                
                <button type="submit" class="recovery-submit" id="createAccountSubmit">
                    Create Account
                </button>
            </form>
        </div>
    </div>

    <!-- Load original script.js for existing functionality -->
    <script src="../js/script.js"></script>
    
    <!-- Enhanced JavaScript functionality -->
    <script>
        // Enhanced Login System with Loading States
        class EnhancedAuthSystem {
            constructor() {
                this.currentUser = null;
                this.loginAttempts = 0;
                this.maxLoginAttempts = 5;
                this.lockoutTime = 15 * 60 * 1000; // 15 minutes
                this.sessionTimeout = 30 * 60 * 1000; // 30 minutes
                this.sessionTimer = null;
                
                this.initializeEventListeners();
                this.checkSession();
            }

            initializeEventListeners() {
                // Login form submission
                const loginForm = document.getElementById('loginForm');
                if (loginForm) {
                    loginForm.addEventListener('submit', (e) => this.handleLogin(e));
                }

                // Password visibility toggle
                const togglePassword = document.getElementById('togglePassword');
                if (togglePassword) {
                    togglePassword.addEventListener('click', () => this.togglePasswordVisibility());
                }

                // Help links
                const forgotPasswordLink = document.getElementById('forgotPasswordLink');
                const forgotUsernameLink = document.getElementById('forgotUsernameLink');
                const createAccountLink = document.getElementById('createAccountLink');

                if (forgotPasswordLink) {
                    forgotPasswordLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.showPasswordRecoveryModal();
                    });
                }

                if (forgotUsernameLink) {
                    forgotUsernameLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.showPasswordRecoveryModal();
                    });
                }

                if (createAccountLink) {
                    createAccountLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.showCreateAccountModal();
                    });
                }

                // Modal close buttons
                const closeRecoveryModal = document.getElementById('closeRecoveryModal');
                const closeCreateAccountModal = document.getElementById('closeCreateAccountModal');

                if (closeRecoveryModal) {
                    closeRecoveryModal.addEventListener('click', () => this.hidePasswordRecoveryModal());
                }

                if (closeCreateAccountModal) {
                    closeCreateAccountModal.addEventListener('click', () => this.hideCreateAccountModal());
                }

                // Recovery form
                const recoveryForm = document.getElementById('recoveryForm');
                if (recoveryForm) {
                    recoveryForm.addEventListener('submit', (e) => this.handlePasswordRecovery(e));
                }

                // Create account form
                const createAccountForm = document.getElementById('createAccountForm');
                if (createAccountForm) {
                    createAccountForm.addEventListener('submit', (e) => this.handleCreateAccount(e));
                }

                // Recovery method selection
                const recoveryOptions = document.querySelectorAll('.recovery-option');
                recoveryOptions.forEach(option => {
                    option.addEventListener('click', () => this.selectRecoveryMethod(option));
                });

                // Password validation
                const newPassword = document.getElementById('newPassword');
                if (newPassword) {
                    newPassword.addEventListener('input', () => this.validatePassword());
                }

                // Logout button
                const logoutBtn = document.getElementById('logoutBtn');
                if (logoutBtn) {
                    logoutBtn.addEventListener('click', () => this.logout());
                }
            }

            async handleLogin(e) {
                e.preventDefault();
                
                const username = document.getElementById('username').value.trim();
                const password = document.getElementById('password').value;
                const loginBtn = document.getElementById('loginBtn');
                const loginError = document.getElementById('loginError');
                
                if (!username || !password) {
                    this.showError('Please enter both username and password.');
                    return;
                }

                // Show loading state
                loginBtn.classList.add('loading');
                loginBtn.disabled = true;
                loginError.textContent = '';

                try {
                    // Simulate API call delay
                    await new Promise(resolve => setTimeout(resolve, 1500));
                    
                    // Check credentials (using your existing user database)
                    const isValid = this.validateCredentials(username, password);
                    
                    if (isValid) {
                        this.currentUser = { username, loginTime: new Date() };
                        this.showNotification('Login successful!', 'success');
                        this.showDashboard();
                        this.startSessionTimer();
                        this.loginAttempts = 0;
                    } else {
                        this.loginAttempts++;
                        const attemptsLeft = this.maxLoginAttempts - this.loginAttempts;
                        
                        if (attemptsLeft > 0) {
                            this.showError(`Invalid credentials. ${attemptsLeft} attempts remaining.`);
                        } else {
                            this.showError('Too many failed attempts. Account locked for 15 minutes.');
                            this.lockAccount();
                        }
                    }
                } catch (error) {
                    this.showError('Login failed. Please try again.');
                } finally {
                    // Remove loading state
                    loginBtn.classList.remove('loading');
                    loginBtn.disabled = false;
                }
            }

            validateCredentials(username, password) {
                // Your existing user validation logic
                const users = {
                    'lynn': 'lynn123',
                    'admin': 'admin123',
                    'testuser': '123',
                    // Add other users from your existing database
                };
                
                return users[username] === password;
            }

            togglePasswordVisibility() {
                const passwordInput = document.getElementById('password');
                const toggleIcon = document.querySelector('#togglePassword i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    toggleIcon.className = 'fas fa-eye-slash';
                } else {
                    passwordInput.type = 'password';
                    toggleIcon.className = 'fas fa-eye';
                }
            }

            showPasswordRecoveryModal() {
                const modal = document.getElementById('passwordRecoveryModal');
                if (modal) {
                    modal.style.display = 'flex';
                }
            }

            hidePasswordRecoveryModal() {
                const modal = document.getElementById('passwordRecoveryModal');
                if (modal) {
                    modal.style.display = 'none';
                }
            }

            showCreateAccountModal() {
                const modal = document.getElementById('createAccountModal');
                if (modal) {
                    modal.style.display = 'flex';
                }
            }

            hideCreateAccountModal() {
                const modal = document.getElementById('createAccountModal');
                if (modal) {
                    modal.style.display = 'none';
                }
            }

            selectRecoveryMethod(selectedOption) {
                const options = document.querySelectorAll('.recovery-option');
                options.forEach(option => option.classList.remove('active'));
                selectedOption.classList.add('active');
                
                const method = selectedOption.dataset.method;
                const phoneGroup = document.getElementById('phoneGroup');
                const emailInput = document.getElementById('recoveryEmail');
                const phoneInput = document.getElementById('recoveryPhone');
                
                if (method === 'phone') {
                    phoneGroup.style.display = 'block';
                    phoneInput.required = true;
                    emailInput.required = false;
                } else {
                    phoneGroup.style.display = 'none';
                    phoneInput.required = false;
                    emailInput.required = true;
                }
            }

            async handlePasswordRecovery(e) {
                e.preventDefault();
                
                const submitBtn = document.getElementById('recoverySubmit');
                submitBtn.classList.add('loading');
                submitBtn.disabled = true;
                
                try {
                    // Simulate API call
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    this.showNotification('Recovery instructions sent!', 'success');
                    this.hidePasswordRecoveryModal();
                } catch (error) {
                    this.showNotification('Failed to send recovery instructions.', 'error');
                } finally {
                    submitBtn.classList.remove('loading');
                    submitBtn.disabled = false;
                }
            }

            async handleCreateAccount(e) {
                e.preventDefault();
                
                const form = e.target;
                const formData = new FormData(form);
                const submitBtn = document.getElementById('createAccountSubmit');
                
                // Validate passwords match
                const password = document.getElementById('newPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                
                if (password !== confirmPassword) {
                    this.showNotification('Passwords do not match.', 'error');
                    return;
                }
                
                submitBtn.classList.add('loading');
                submitBtn.disabled = true;
                
                try {
                    // Simulate account creation
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    this.showNotification('Account created successfully!', 'success');
                    this.hideCreateAccountModal();
                    form.reset();
                } catch (error) {
                    this.showNotification('Failed to create account.', 'error');
                } finally {
                    submitBtn.classList.remove('loading');
                    submitBtn.disabled = false;
                }
            }

            validatePassword() {
                const password = document.getElementById('newPassword').value;
                const requirements = {
                    length: password.length >= 8,
                    upper: /[A-Z]/.test(password),
                    lower: /[a-z]/.test(password),
                    number: /\d/.test(password)
                };
                
                Object.keys(requirements).forEach(req => {
                    const element = document.getElementById(req + 'Req');
                    const icon = element.querySelector('i');
                    
                    if (requirements[req]) {
                        element.classList.add('valid');
                        element.classList.remove('invalid');
                        icon.className = 'fas fa-check';
                    } else {
                        element.classList.add('invalid');
                        element.classList.remove('valid');
                        icon.className = 'fas fa-times';
                    }
                });
            }

            showDashboard() {
                const loginSection = document.getElementById('loginSection');
                const dashboardContainer = document.getElementById('dashboardContainer');
                
                if (loginSection) loginSection.style.display = 'none';
                if (dashboardContainer) dashboardContainer.style.display = 'block';
                
                // Initialize dashboard
                this.initializeDashboard();
            }

            hideDashboard() {
                const loginSection = document.getElementById('loginSection');
                const dashboardContainer = document.getElementById('dashboardContainer');
                
                if (loginSection) loginSection.style.display = 'block';
                if (dashboardContainer) dashboardContainer.style.display = 'none';
            }

            logout() {
                this.currentUser = null;
                this.clearSessionTimer();
                this.hideDashboard();
                this.showNotification('Logged out successfully.', 'info');
                
                // Clear form fields
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
            }

            startSessionTimer() {
                this.clearSessionTimer();
                this.sessionTimer = setTimeout(() => {
                    this.showNotification('Session expired. Please log in again.', 'info');
                    this.logout();
                }, this.sessionTimeout);
            }

            clearSessionTimer() {
                if (this.sessionTimer) {
                    clearTimeout(this.sessionTimer);
                    this.sessionTimer = null;
                }
            }

            checkSession() {
                // Check if user should remain logged in
                const savedUser = localStorage.getItem('currentUser');
                if (savedUser) {
                    this.currentUser = JSON.parse(savedUser);
                    this.showDashboard();
                    this.startSessionTimer();
                }
            }

            lockAccount() {
                setTimeout(() => {
                    this.loginAttempts = 0;
                    this.showNotification('Account unlocked. You may try logging in again.', 'info');
                }, this.lockoutTime);
            }

            showError(message) {
                const errorElement = document.getElementById('loginError');
                if (errorElement) {
                    errorElement.textContent = message;
                    errorElement.style.display = 'block';
                }
            }

            showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.textContent = message;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 5000);
            }

            initializeDashboard() {
                // Initialize dashboard navigation
                const navButtons = document.querySelectorAll('.nav-btn');
                const contentSections = document.querySelectorAll('.content-section');
                
                navButtons.forEach(btn => {
                    btn.addEventListener('click', () => {
                        const sectionId = btn.dataset.section + '-section';
                        
                        // Update active nav button
                        navButtons.forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        
                        // Show corresponding section
                        contentSections.forEach(section => {
                            section.style.display = section.id === sectionId ? 'block' : 'none';
                        });
                        
                        // Load section-specific content
                        this.loadSectionContent(btn.dataset.section);
                    });
                });
                
                // Initialize settings toggles
                const toggles = document.querySelectorAll('.toggle-switch');
                toggles.forEach(toggle => {
                    toggle.addEventListener('click', () => {
                        toggle.classList.toggle('active');
                        const setting = toggle.dataset.setting;
                        const isActive = toggle.classList.contains('active');
                        this.saveSetting(setting, isActive);
                    });
                });
                
                // Initialize search functionality
                const searchBtn = document.getElementById('searchBtn');
                const searchInput = document.getElementById('searchInput');
                
                if (searchBtn && searchInput) {
                    searchBtn.addEventListener('click', () => this.performSearch());
                    searchInput.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            this.performSearch();
                        }
                    });
                }
                
                // Initialize filter options
                const filterOptions = document.querySelectorAll('.filter-option');
                filterOptions.forEach(option => {
                    option.addEventListener('click', () => {
                        filterOptions.forEach(opt => opt.classList.remove('active'));
                        option.classList.add('active');
                        this.applySearchFilter(option.dataset.filter);
                    });
                });
                
            }

            loadSectionContent(section) {
                switch (section) {
                    case 'users':
                        this.loadUserManagement();
                        break;
                    case 'analytics':
                        this.updateAnalytics();
                        break;
                    case 'search':
                        this.initializeAdvancedSearch();
                        break;
                    case 'profiles':
                        this.loadProfileBrowser();
                        break;
                    case 'settings':
                        this.loadSettings();
                        break;
                }
            }

            loadUserManagement() {
                const userGrid = document.getElementById('userGrid');
                if (!userGrid) return;
                
                // Sample user data (integrate with your existing user database)
                const users = [
                    { id: 1, username: 'lynn', role: 'admin', status: 'active', lastLogin: '2 hours ago' },
                    { id: 2, username: 'testuser', role: 'user', status: 'active', lastLogin: '1 day ago' },
                    { id: 3, username: 'admin', role: 'admin', status: 'active', lastLogin: '5 minutes ago' }
                ];
                
                userGrid.innerHTML = users.map(user => `
                    <div class="user-card">
                        <div class="user-header">
                            <div class="user-avatar">${user.username.charAt(0).toUpperCase()}</div>
                            <div class="user-info">
                                <h3>${user.username}</h3>
                                <div class="user-role">${user.role}</div>
                            </div>
                        </div>
                        <div class="user-details">
                            <p><strong>Status:</strong> ${user.status}</p>
                            <p><strong>Last Login:</strong> ${user.lastLogin}</p>
                        </div>
                        <div class="user-actions">
                            <button class="action-btn edit" onclick="editUser(${user.id})">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button class="action-btn delete" onclick="deleteUser(${user.id})">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    </div>
                `).join('');
            }

            updateAnalytics() {
                // Update analytics with real-time data
                const stats = {
                    totalUsers: 12,
                    activeProfiles: 8,
                    totalSearches: 247,
                    systemUptime: '99.8%'
                };
                
                Object.keys(stats).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) {
                        element.textContent = stats[key];
                    }
                });
            }

            performSearch() {
                const query = document.getElementById('searchInput').value.trim();
                const resultsContainer = document.getElementById('searchResults');
                
                if (!query) {
                    resultsContainer.innerHTML = '<p>Please enter a search term.</p>';
                    return;
                }
                
                // Simulate search results
                const results = [
                    { type: 'user', title: 'lynn', description: 'Administrator user account' },
                    { type: 'profile', title: 'Test Profile', description: 'Sample profile for testing' },
                    { type: 'content', title: 'Database Entry', description: 'Recent database modification' }
                ];
                
                resultsContainer.innerHTML = `
                    <h3>Search Results for "${query}"</h3>
                    <div class="search-results-list">
                        ${results.map(result => `
                            <div class="search-result-item">
                                <div class="result-type">${result.type}</div>
                                <h4>${result.title}</h4>
                                <p>${result.description}</p>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            applySearchFilter(filter) {
                // Apply search filter logic
                console.log('Applying filter:', filter);
            }

            loadProfileBrowser() {
                // Load profile browsing functionality
                // This would integrate with your existing profile system
            }

            loadSettings() {
                // Load current settings
                const savedSettings = JSON.parse(localStorage.getItem('userSettings') || '{}');
                
                // Apply saved settings to toggles
                Object.keys(savedSettings).forEach(setting => {
                    const toggle = document.querySelector(`[data-setting="${setting}"]`);
                    if (toggle && savedSettings[setting]) {
                        toggle.classList.add('active');
                    }
                });
            }

            saveSetting(setting, value) {
                const settings = JSON.parse(localStorage.getItem('userSettings') || '{}');
                settings[setting] = value;
                localStorage.setItem('userSettings', JSON.stringify(settings));
                
                this.showNotification(`${setting} setting updated.`, 'success');
            }
        }

        // Global functions for user management
        window.editUser = function(userId) {
            console.log('Editing user:', userId);
            // Implement user editing functionality
        };

        window.deleteUser = function(userId) {
            if (confirm('Are you sure you want to delete this user?')) {
                console.log('Deleting user:', userId);
                // Implement user deletion functionality
            }
        };

        // HTML File Navigation Dropdown Functionality
        function toggleDropdown() {
            const dropdown = document.getElementById('htmlFileDropdown');
            const chevron = dropdown.querySelector('.fa-chevron-down');
            
            dropdown.classList.toggle('open');
            
            // Animate chevron
            if (dropdown.classList.contains('open')) {
                chevron.style.transform = 'rotate(180deg)';
            } else {
                chevron.style.transform = 'rotate(0deg)';
            }
        }

        // Initialize the enhanced authentication system
        document.addEventListener('DOMContentLoaded', () => {
            window.authSystem = new EnhancedAuthSystem();
            
            // Set current file indicator for dropdown
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const dropdownItems = document.querySelectorAll('.dropdown-item');
            
            dropdownItems.forEach(item => {
                const href = item.getAttribute('href');
                item.classList.remove('current');
                
                if (href === currentPage || (currentPage === '' && href === 'index.html')) {
                    item.classList.add('current');
                }
            });
        });

        // Modal click-outside-to-close functionality and dropdown close
        document.addEventListener('click', (e) => {
            const passwordModal = document.getElementById('passwordRecoveryModal');
            const createAccountModal = document.getElementById('createAccountModal');
            const dropdown = document.getElementById('htmlFileDropdown');
            const chevron = dropdown ? dropdown.querySelector('.fa-chevron-down') : null;
            
            if (e.target === passwordModal) {
                passwordModal.style.display = 'none';
            }
            
            if (e.target === createAccountModal) {
                createAccountModal.style.display = 'none';
            }
            
            // Close dropdown when clicking outside
            if (dropdown && !dropdown.contains(e.target)) {
                dropdown.classList.remove('open');
                if (chevron) chevron.style.transform = 'rotate(0deg)';
            }
        });
    </script>
</body>

</html>